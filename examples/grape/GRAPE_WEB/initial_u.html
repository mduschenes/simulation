
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
      <title>Filename : initial_u</title>
      <meta name="generator" content="MATLAB 7.14">
      <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
      <meta name="DC.date" content="2014-03-05">
      <meta name="DC.source" content="initial_u.m">
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <link rel="stylesheet" type="text/css" href="css/screen.css" media="screen" />
  </head>
  
<body>
    <ul id=menu>
      <li><a href="flowchart.html">Flow Chart</a>
      <li><a href="tools/tools.html">Tools</a>
      <li><a href="faq/faq.html">F. A. Q.</a>
      <li><a href="../index.html">NMR-QIP Page</a>
    </ul>
    <div class="content"><h1>FileName : initial_u</h1><!--introduction--><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Description</a></li></ul></div><h2>Description<a name="1"></a></h2><p>Generates the random initial guess of controls depending upon the input parameters specified in the input file.</p><p>For example, the following plot is with gra.N=1000; R=40; and u_max = 8000</p><p><img vspace="5" hspace="5" src="Images/initial_controls.jpg" alt=""> </p><p>The green points are randomly generated after every Rth point and then a smooth cubic function is interpolated from these points using matlab inbuilt function spline.</p><pre class="codeinput"><span class="keyword">function</span> u = initial_u(u_max,R)
<span class="keyword">global</span> gra

u = zeros(gra.N,gra.m);
<span class="keyword">for</span> j=1:gra.m
    u(:,j) = rand_u(u_max,R);
<span class="keyword">end</span>

<span class="comment">%****************************************************</span>

<span class="keyword">function</span> u_r= rand_u(S,R)
<span class="keyword">global</span> gra

x=[1 R:R:gra.N-1 gra.N];
y=[0 S*(rand(1,length(x)-2)-.5) 0];
xx = 1:1:gra.N;
u1_r = spline(x,y,xx);
hold <span class="string">on</span>
plot(xx,u1_r)
plot(x,y,<span class="string">'ro'</span>)
<span class="keyword">return</span>
</pre><p class="footer"><br>
      Published with MATLAB&reg; 7.14<br></p></div><!--
##### SOURCE BEGIN #####
%% FileName : initial_u

%% Description
% Generates the random initial guess of controls depending upon the input
% parameters specified in the input file.
%
% For example, the following plot is with gra.N=1000; R=40; and u_max = 8000
%
% <<initial_controls.jpg>>
%
% The green points are randomly generated after every Rth point and then a
% smooth cubic function is interpolated from these points using matlab
% inbuilt function spline.

function u = initial_u(u_max,R)
global gra

u = zeros(gra.N,gra.m);
for j=1:gra.m
    u(:,j) = rand_u(u_max,R);
end

%****************************************************

function u_r= rand_u(S,R)
global gra

x=[1 R:R:gra.N-1 gra.N];
y=[0 S*(rand(1,length(x)-2)-.5) 0];
xx = 1:1:gra.N;
u1_r = spline(x,y,xx);
hold on
plot(xx,u1_r)
plot(x,y,'ro')
return

##### SOURCE END #####
--></body></html>