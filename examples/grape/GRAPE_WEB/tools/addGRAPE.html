
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>  <head>
      <title>Filename : addGRAPE</title>
      <meta name="generator" content="MATLAB 7.14">
      <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
      <meta name="DC.date" content="2014-03-05">
      <meta name="DC.source" content="addGRAPE.m">
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <link rel="stylesheet" type="text/css" href="../css/screen.css" media="screen" />
  </head>
  
<body>
    <ul id=menu>
      <li><a href="../flowchart.html">Flow Chart</a>
      <li><a href="../tools/tools.html">Tools</a>
      <li><a href="../faq/faq.html">F. A. Q.</a>
      <li><a href="../../index.html">NMR-QIP Page</a>
    </ul>
    
    <div class="content"><h1>FileName : addGRAPE</h1><!--introduction--><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Description</a></li><li><a href="#2">Command</a></li></ul></div><h2>Description<a name="1"></a></h2><p>Adds a GRAPE pulse n number of times. the intiala and final delays are taken care of automatically.</p><h2>Command<a name="2"></a></h2><p><b>new_u=addGRAPE(GRinfo,noofadd)</b></p><p><b>GRinfo </b>: Variable in which all the information of grape pulse is stored.</p><p><b>noofadd</b> : number of time you want to add the GRAPE Pulse.</p><p><b>new_u</b> : it is the output in which your new added controls be saved.</p><pre class="codeinput"><span class="keyword">function</span>  new_u = addGRAPE(GRinfo,noofadd)
<span class="keyword">global</span> gra
gra=GRinfo;
del_t=GRinfo.del_t;
indel=GRinfo.initdelay;

n=round(2*indel/del_t);

initial_u= GRinfo.u;


N=length(initial_u);
new_u(1:N,:)=initial_u;

<span class="keyword">for</span> j=1:noofadd-1
    new_u(length(new_u)+1:length(new_u)+n,:)=0;
    new_u(length(new_u)+1:length(new_u)+N,:)=initial_u;
<span class="keyword">end</span>
</pre><p class="footer"><br>
      Published with MATLAB&reg; 7.14<br></p></div><!--
##### SOURCE BEGIN #####
%% FileName : addGRAPE

%% Description
% Adds a GRAPE pulse n number of times. the intiala and final delays are
% taken care of automatically.

%% Command
% new_u=addGRAPE(GRinfo,noofadd)
%
% GRinfo : Variable in which all the information of grape pulse is stored.
% 
% noofadd : number of time you want to add the GRAPE Pulse.
%
% new_u : it is the output in which your new added controls be saved.
%

function  new_u = addGRAPE(GRinfo,noofadd)

if nargin<1
    disp(' ')
    disp(' new_u = addGRAPE(GRinfo,N)')
    disp('      add N GRAPE sequences')
    disp('  ')
    disp('             N - Number of times to add')
    disp('  ')
    disp('      SIMPLEST INPUT : ampwr(GRinfo,N)')
    disp('  ')
    disp('  ')
    disp('   (Hemant Katiyar, 2012)')
    return
end


global gra
gra=GRinfo;
del_t=GRinfo.del_t;
indel=GRinfo.initdelay;

n=round(2*indel/del_t);

initial_u= GRinfo.u;


N=length(initial_u);
new_u(1:N,:)=initial_u;

for j=1:noofadd-1
    new_u(length(new_u)+1:length(new_u)+n,:)=0;
    new_u(length(new_u)+1:length(new_u)+N,:)=initial_u;
end
    
##### SOURCE END #####
--></body></html>