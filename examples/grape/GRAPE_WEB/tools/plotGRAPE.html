
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
 <title>Filename : plotGRAPE</title>
      <meta name="generator" content="MATLAB 7.14">
      <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
      <meta name="DC.date" content="2014-03-05">
      <meta name="DC.source" content="plotGRAPE.m">
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <link rel="stylesheet" type="text/css" href="../css/screen.css" media="screen" />
  </head>
  
<body>
    <ul id=menu>
      <li><a href="../flowchart.html">Flow Chart</a>
      <li><a href="../tools/tools.html">Tools</a>
      <li><a href="../faq/faq.html">F. A. Q.</a>
      <li><a href="../../index.html">NMR-QIP Page</a>
    </ul>
    <div class="content"><h1>FileName : plotGRAPE</h1><!--introduction--><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Description</a></li><li><a href="#2">Command</a></li><li><a href="#3">EXAMPLE OUTPUT</a></li></ul></div><h2>Description<a name="1"></a></h2><p>Plots the variation of the controls. Seperate plot is generated for separate channels, the top  of the plot mentions the fidelity of the pulse along with the channel number.</p><h2>Command<a name="2"></a></h2><p><b>plotGRAPE(GRinfo)</b></p><p><b>GRinfo</b> : Variable in which all the information of grape pulse is stored.</p><h2>EXAMPLE OUTPUT<a name="3"></a></h2><p>Shown below is an example plot. Red is ux and green is uy.</p><p><img vspace="5" hspace="5" src="../tools/img/sample_plotGRAPE.jpg" alt=""> </p><pre class="codeinput"><span class="keyword">function</span> plotGRAPE(Input_struct)
<span class="keyword">global</span> gra
gra=Input_struct;
u=gra.u;


a1=0:gra.del_t:gra.T; a2=gra.del_t:gra.del_t:gra.T-gra.del_t;
xplot_axis=sort([a1 a2]);

u=reshape(repmat(u,1,2)',gra.m,2*length(u))';

<span class="keyword">for</span> j=1:gra.m/2
    figure
    hold <span class="string">on</span>
    P1=plot(xplot_axis,u(:,j)/2/pi/1e3,<span class="string">'r'</span>,<span class="string">'LineWidth'</span>,2);
    P2=plot(xplot_axis,u(:,j+length(gra.spinlist))/2/pi/1e3,<span class="string">'g'</span>,<span class="string">'LineWidth'</span>,2);
    X1=xlabel(<span class="string">'Time(Seconds)'</span>);
    Y1=ylabel(<span class="string">'RF Power(KHz)'</span>);
    T1=title([<span class="string">'GRAPE Controls Variation || Fidelity :'</span>,num2str(gra.IDEALfidelity),<span class="string">' || Channel : '</span>,num2str(j)]);
    set([gca X1 Y1 T1],<span class="string">'FontSize'</span>,12,<span class="string">'FontWeight'</span>,<span class="string">'bold'</span>)

    grid <span class="string">on</span>
<span class="keyword">end</span>
</pre><p class="footer"><br>
      Published with MATLAB&reg; 7.14<br></p></div><!--
##### SOURCE BEGIN #####
%% FileName : plotGRAPE

%% Description
% Plots the variation of the controls. Seperate plot is generated for
% separate channels, the top  of the plot mentions the fidelity of the
% pulse along with the channel number.


%% Command
% plotGRAPE(GRinfo)
%
% GRinfo : Variable in which all the information of grape pulse is stored.
%

%% EXAMPLE OUTPUT
% Shown below is an example plot. Red is ux and green is uy.
%
% <<sample_plotGRAPE.jpg>>

function plotGRAPE(Input_struct)

if nargin<1
    disp('  ')
    disp('      plotGRAPE(GRinfo)')
    disp('      plots variation of controls, each figure corresponds to a channel')
    disp('  ')
    disp('  ')
    disp('      SIMPLEST INPUT : plotGRAPE(GRinfo)')
    disp('')
    disp('  ')
    disp('  ')
    disp('   (Hemant Katiyar, 2012)')
    return
end
global gra
gra=Input_struct;
u=gra.u;


a1=0:gra.del_t:gra.T; a2=gra.del_t:gra.del_t:gra.T-gra.del_t;
xplot_axis=sort([a1 a2]);

u=reshape(repmat(u,1,2)',gra.m,2*length(u))';

for j=1:gra.m/2
    figure
    hold on
    P1=plot(xplot_axis,u(:,j)/2/pi/1e3,'r','LineWidth',2);
    P2=plot(xplot_axis,u(:,j+length(gra.spinlist))/2/pi/1e3,'g','LineWidth',2);
    X1=xlabel('Time(Seconds)');
    Y1=ylabel('RF Power(KHz)');
    T1=title(['GRAPE Controls Variation || Fidelity :',num2str(gra.IDEALfidelity),' || Channel : ',num2str(j)]);
    set([gca X1 Y1 T1],'FontSize',12,'FontWeight','bold')
    
    grid on
end





##### SOURCE END #####
--></body></html>