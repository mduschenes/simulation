
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
      <title>Filename : freezing_fff1</title>
      <meta name="generator" content="MATLAB 7.14">
      <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
      <meta name="DC.date" content="2014-03-05">
      <meta name="DC.source" content="freezing_fff1.m">
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <link rel="stylesheet" type="text/css" href="css/screen.css" media="screen" />
  </head>

  <body>
    <ul id=menu>
      <li><a href="flowchart.html">Flow Chart</a>
      <li><a href="tools/tools.html">Tools</a>
      <li><a href="faq/faq.html">F. A. Q.</a>
      <li><a href="../index.html">NMR-QIP Page</a>
    </ul>
    <div class="content">
    <h1>SAMPLE INPUT FILE</h1>
    <h2>Contents</h2>
    <div>
    <ul>
      <li><a href="#1">Defining gra as a Global variable</a></li>
      <li><a href="#2">Input the parameters for molecule information</a></li>
      <li><a href="#3">Values for Constructing Internal Hamiltonian</a></li>
      <li><a href="#4">Input parameters for GRAPE sequence</a></li>
      <li><a href="#5">Initial guess for the GRAPE sequence</a></li>
      <li><a href="#6">Target parameters</a></li><li><a href="#7">Parameters for GRAPE spequence when converting to bruker format</a></li>
      <li><a href="#8">Parameters for RF inhomogenity</a></li>
      <li><a href="#9">PENALTY conditions</a></li>
      <li><a href="#10">Stoping conditions</a></li>
    </ul>
    </div>
    
    <h2>Defining gra as a Global variable<a name="1"></a></h2>
    <pre class="codeinput">
    clc
    <span class="keyword">global</span> gra
    </pre>
    
    <h2>Input the parameters for molecule information<a name="2"></a></h2>
    <p>See <a href="prodop.html">prodop</a> for more details</p>
    
    Example : spinlist=[2 1 2] for total of 5 spins out of which 1-2 and 4-5 are homonuclear and (1-2),3,(4-5) are hetronuclear
    <pre class="codeinput">
    gra.spinlist=[3];     
     </pre>
    Example : spinNumbers=[1/2 1 3/2] 1-2 have spin=1/2, 3rd have spin=1 , 4-5 have spin=3/2
     <pre class="codeinput">
    gra.spinNumbers=[1/2];             
    </pre>
    
    <h2>Values for Constructing Internal Hamiltonian<a name="3"></a></h2>
    
    Offset values
    <pre class="codeinput">
    v(1) = 11860.8;
    v(2) = 0;
    v(3) = -17379.09;
    </pre>
    
    J-Coupling values
    <pre class="codeinput">
    J=zeros(sum(gra.spinlist));
    J(1,2) = 69.9;
    J(2,3) = -128.25;
    J(1,3) = 47.4;
    </pre>
    
    
    <h2>Input parameters for GRAPE sequence<a name="4"></a></h2>
    
    Number of control parameters
    <pre class="codeinput">
    gra.m = 2*length(gra.spinlist);             
    </pre>
    Number of Time Steps
    <pre class="codeinput">
    gra.N = 1000;                               
    </pre>
    Duration of each Time step
    <pre class="codeinput">
    gra.del_t = 10e-6;
    </pre>
    
    
    <h2>Initial guess for the GRAPE sequence<a name="5"></a></h2>
    <p><strong>See <a href="initial_u.html">initial_u</a> for more details.</strong></p>
    
    Maximum RF-power of the initial guess.
    <pre class="codeinput">
    u_max = 8000;               
    </pre>
    Number of points after which a random value has to be chosen
    <pre class="codeinput">
    R=40;                       
    u=initial_u(u_max,R);
    </pre>
    
    
    <h2>Target parameters<a name="6"></a></h2>
    
    Define the vaue of initial and final delay
    <pre class="codeinput">
    gra.initdelay = 5e-6;          
    </pre>
    Target Operator
    <pre class="codeinput">
    gra.Utarg = expm(-1i*pi*Ix(:,:,1));
    </pre>
    Initial Step Size (See GRAPE Paper for details)
    <pre class="codeinput">
    epsilon=5e+7;                   
    </pre>
    Target Fidelity
    <pre class="codeinput">
    targ_fide=.999;                 
    </pre>
    
    
    
    <h2>Parameters for GRAPE spequence when converting to bruker format<a name="7"></a></h2>
    Name of the file in which all the details will be stored
    <pre class="codeinput">
    gra.GRAPEname =  <span class="string">'allnew_freezing_U359_2cyc'</span>;
    </pre>
    
    <h2>Parameters for RF inhomogenity<a name="8"></a></h2>
    <pre class="codeinput">
    load <span class="string">rfi8_5pt.txt</span>
    rfi=rfi8_5pt;
    
    gra.rfINHrange = rfi(:,1);
    gra.rfINHiwt = rfi(:,2);
    </pre>
    
    <h2>PENALTY conditions<a name="9"></a></h2>
    
    <p>see <a href="penalty.html">penalty</a> and <a href="penalizecontrols.html">penalizecontrols</a> for more details. Following is the length of the calibarated <img src="Images/freezing_fff1_eq13451.png" alt="$\pi/2$"> pulse</p><pre class="codeinput">plength = 15.6e-6;
    </pre>
    
    <h2>Stoping conditions<a name="10"></a></h2>
    
    <p>Setting the threshold for stopping</p>
    <pre class="codeinput">
    gra.threshold = 1e-15;
    </pre>
    Stop after following number of iterations if fidelity is not increasing more than gra.threshold
    <pre class="codeinput">
    stop_counter  = 100;
    </pre>
    Start saving after the following value of fidelity is Reached
    <pre class="codeinput">
    saving_fidel  = 0.90;
    </pre>
    Save after every iteration given by following number when saving_fidel is reached
    <pre class="codeinput">
    iter_no       = 60;
    </pre>
    
    <p class="footer"><br>Published with MATLAB&reg; 7.14<br></p>
    
    </div>
  </body>
 </html>
 
 
 
 